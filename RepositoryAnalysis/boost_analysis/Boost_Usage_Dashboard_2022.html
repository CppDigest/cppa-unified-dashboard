<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boost Usage Statistics Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.30.0/index.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        
        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-wrapper {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.2em;
            color: #4a5568;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:hover {
            background: #f7fafc;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .badge-top {
            background: #48bb78;
            color: white;
        }
        
        .badge-bottom {
            background: #ed8936;
            color: white;
        }
        
        .date-range {
            font-size: 0.9em;
            color: #718096;
        }
        
        .heatmap-container {
            overflow-x: auto;
            margin-top: 20px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: 1px solid #e2e8f0;
        }
        
        .heatmap {
            border-collapse: separate;
            border-spacing: 3px;
            width: 100%;
            min-width: 1400px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .heatmap th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 8px;
            font-size: 0.9em;
            font-weight: 600;
            text-align: center;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            min-width: 40px;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .heatmap th:first-child {
            writing-mode: horizontal-tb;
            text-orientation: initial;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            position: sticky;
            left: 0;
            z-index: 20;
            min-width: 150px;
            text-align: left;
            padding-left: 15px;
        }
        
        .heatmap td {
            padding: 6px;
            text-align: center;
            border: 2px solid transparent;
            font-size: 0.85em;
            font-weight: 500;
            position: relative;
        }
        
        .heatmap td:first-child {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            font-weight: 600;
            color: #2d3748;
            position: sticky;
            left: 0;
            z-index: 15;
            text-align: left;
            padding-left: 15px;
            border-right: 3px solid #cbd5e0;
            box-shadow: 2px 0 4px rgba(0,0,0,0.05);
        }
        
        .heatmap-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            min-height: 35px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 2px solid transparent;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.15);
            z-index: 25;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.8);
        }
        
        .heatmap-cell[data-value="0"] {
            background: #f7fafc !important;
            color: #a0aec0;
            font-weight: 400;
        }
        
        .heatmap-legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 25px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #f7fafc;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.9em;
        }
        
        .legend-color {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            border: 2px solid rgba(0,0,0,0.1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .heatmap-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        @media (max-width: 1024px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š Boost Usage Statistics Dashboard</h1>
        <p class="subtitle">Generated: 2025-12-09 20:00:43 UTC</p>
        
        <div class="section">
            <h2 class="section-title">Top 20 Boost Libraries</h2>
            <div class="charts-container">
                <div class="chart-wrapper">
                    <div class="chart-title">Repository Count</div>
                    <canvas id="topRepoChart"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">Usage Count</div>
                    <canvas id="topUsageChart"></canvas>
                </div>
            </div>
            <div class="table-container">
                <table id="topTable">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Library</th>
                            <th>Repository Count</th>
                            <th>Usage Count</th>
                            <th>Time Range</th>
                        </tr>
                    </thead>
                    <tbody id="topTableBody"></tbody>
                </table>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Repository Counts by Year</h2>
            <p style="color: #718096; margin-bottom: 20px;">
                Number of repositories using Boost, grouped by the year of their latest commit.
            </p>
            <div class="chart-wrapper">
                <canvas id="reposByYearChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Boost Version Distribution (1.53.0 - 1.80.0)</h2>
            <p style="color: #718096; margin-bottom: 20px;">
                Number of repositories using each Boost version. Only versions from 1.53.0 to 1.80.0 are shown.
            </p>
            <div class="chart-wrapper">
                <canvas id="versionDistributionChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Commit Distribution Over Time (2002-2022)</h2>
            <p style="color: #718096; margin-bottom: 20px;">
                Heatmap showing commit activity by year for each library. Data covers the period 2002-2022. Darker colors indicate more commits. Hover over cells to see exact values.
            </p>
            <div class="heatmap-container">
                <table class="heatmap" id="commitHeatmap">
                    <thead id="heatmapHeader"></thead>
                    <tbody id="heatmapBody"></tbody>
                </table>
                <div class="heatmap-legend" id="heatmapLegend"></div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Bottom 20 Boost Libraries</h2>
            <div class="charts-container">
                <div class="chart-wrapper">
                    <div class="chart-title">Repository Count</div>
                    <canvas id="bottomRepoChart"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">Usage Count</div>
                    <canvas id="bottomUsageChart"></canvas>
                </div>
            </div>
            <div class="table-container">
                <table id="bottomTable">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Library</th>
                            <th>Repository Count</th>
                            <th>Usage Count</th>
                            <th>Time Range</th>
                        </tr>
                    </thead>
                    <tbody id="bottomTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        const topLibraries = [{"name": "smart_ptr", "repo_count": 15469, "usage_count": 176577, "earliest_commit": "2002-06-10", "latest_commit": "2022-11-26"}, {"name": "thread", "repo_count": 14682, "usage_count": 146934, "earliest_commit": "2003-03-10", "latest_commit": "2022-11-24"}, {"name": "algorithm", "repo_count": 14109, "usage_count": 159208, "earliest_commit": "2004-03-04", "latest_commit": "2022-11-26"}, {"name": "filesystem", "repo_count": 13362, "usage_count": 165356, "earliest_commit": "2004-07-12", "latest_commit": "2022-11-25"}, {"name": "bind", "repo_count": 12635, "usage_count": 79991, "earliest_commit": "2005-01-07", "latest_commit": "2022-11-24"}, {"name": "lexical_cast", "repo_count": 12128, "usage_count": 50802, "earliest_commit": "2002-02-11", "latest_commit": "2022-11-26"}, {"name": "program_options", "repo_count": 11469, "usage_count": 45198, "earliest_commit": "2006-04-09", "latest_commit": "2022-11-24"}, {"name": "asio", "repo_count": 11059, "usage_count": 87193, "earliest_commit": "2007-07-03", "latest_commit": "2022-11-26"}, {"name": "config", "repo_count": 10996, "usage_count": 111619, "earliest_commit": "2002-06-10", "latest_commit": "2022-11-25"}, {"name": "date_time", "repo_count": 10610, "usage_count": 52943, "earliest_commit": "2006-03-26", "latest_commit": "2022-11-25"}, {"name": "function", "repo_count": 9716, "usage_count": 33915, "earliest_commit": "2003-03-20", "latest_commit": "2022-11-24"}, {"name": "test", "repo_count": 9476, "usage_count": 270574, "earliest_commit": "2006-10-17", "latest_commit": "2022-11-25"}, {"name": "foreach", "repo_count": 9462, "usage_count": 141624, "earliest_commit": "2007-08-17", "latest_commit": "2022-11-24"}, {"name": "variant", "repo_count": 8138, "usage_count": 26127, "earliest_commit": "2006-08-10", "latest_commit": "2022-11-22"}, {"name": "type_traits", "repo_count": 7796, "usage_count": 67064, "earliest_commit": "2002-06-10", "latest_commit": "2022-11-25"}, {"name": "tuple", "repo_count": 7755, "usage_count": 37258, "earliest_commit": "2006-02-23", "latest_commit": "2022-11-16"}, {"name": "iostreams", "repo_count": 7481, "usage_count": 39905, "earliest_commit": "2006-02-25", "latest_commit": "2022-11-22"}, {"name": "array", "repo_count": 7438, "usage_count": 16188, "earliest_commit": "2007-05-11", "latest_commit": "2022-11-01"}, {"name": "assign", "repo_count": 6973, "usage_count": 71514, "earliest_commit": "2007-05-11", "latest_commit": "2022-11-24"}, {"name": "interprocess", "repo_count": 6792, "usage_count": 38805, "earliest_commit": "2009-12-16", "latest_commit": "2022-11-23"}];
        const bottomLibraries = [{"name": "hof", "repo_count": 1, "usage_count": 2, "earliest_commit": "2022-10-05", "latest_commit": "2022-11-09"}, {"name": "leaf", "repo_count": 2, "usage_count": 2, "earliest_commit": "2021-01-19", "latest_commit": "2022-02-11"}, {"name": "outcome", "repo_count": 3, "usage_count": 11, "earliest_commit": "2022-03-16", "latest_commit": "2022-10-27"}, {"name": "poly_collection", "repo_count": 3, "usage_count": 32, "earliest_commit": "2017-07-20", "latest_commit": "2022-11-13"}, {"name": "safe_numerics", "repo_count": 3, "usage_count": 3, "earliest_commit": "2021-06-03", "latest_commit": "2022-09-22"}, {"name": "stl_interfaces", "repo_count": 3, "usage_count": 11, "earliest_commit": "2020-11-13", "latest_commit": "2021-10-23"}, {"name": "static_string", "repo_count": 4, "usage_count": 10, "earliest_commit": "2013-10-09", "latest_commit": "2020-11-23"}, {"name": "variant2", "repo_count": 4, "usage_count": 4, "earliest_commit": "2019-11-13", "latest_commit": "2022-01-28"}, {"name": "metaparse", "repo_count": 6, "usage_count": 2342, "earliest_commit": "2016-04-25", "latest_commit": "2021-02-12"}, {"name": "pfr", "repo_count": 7, "usage_count": 7, "earliest_commit": "2017-08-20", "latest_commit": "2022-09-30"}, {"name": "vmd", "repo_count": 9, "usage_count": 2337, "earliest_commit": "2016-01-05", "latest_commit": "2022-10-12"}, {"name": "mp11", "repo_count": 10, "usage_count": 42, "earliest_commit": "2018-02-12", "latest_commit": "2022-11-19"}, {"name": "histogram", "repo_count": 11, "usage_count": 168, "earliest_commit": "2019-07-20", "latest_commit": "2022-11-04"}, {"name": "qvm", "repo_count": 12, "usage_count": 1374, "earliest_commit": "2011-08-23", "latest_commit": "2022-06-27"}, {"name": "contract", "repo_count": 15, "usage_count": 15, "earliest_commit": "2018-04-16", "latest_commit": "2019-05-11"}, {"name": "convert", "repo_count": 15, "usage_count": 309, "earliest_commit": "2016-01-05", "latest_commit": "2021-05-20"}, {"name": "parameter_python", "repo_count": 18, "usage_count": 21, "earliest_commit": "2011-11-02", "latest_commit": "2018-01-09"}, {"name": "json", "repo_count": 19, "usage_count": 68, "earliest_commit": "2011-07-20", "latest_commit": "2022-11-25"}, {"name": "callable_traits", "repo_count": 20, "usage_count": 52, "earliest_commit": "2017-11-18", "latest_commit": "2022-11-08"}, {"name": "type_erasure", "repo_count": 20, "usage_count": 3325, "earliest_commit": "2013-10-09", "latest_commit": "2018-01-09"}];
        const commitDistribution = {"smart_ptr": {"2014": 40956, "2016": 15817, "2015": 43017, "2019": 3681, "2017": 14126, "2018": 3882, "2012": 12998, "2011": 7471, "2013": 18986, "2010": 6648, "2008": 1204, "2007": 385, "2022": 2290, "2021": 1478, "2009": 2687, "2020": 1669, "2003": 6, "2005": 106, "2004": 4, "2006": 31, "2002": 14, "2024": 122, "2025": 308, "2023": 151}, "thread": {"2014": 39858, "2015": 34521, "2016": 15502, "2013": 15038, "2019": 2412, "2012": 6243, "2017": 20046, "2018": 4316, "2011": 2280, "2009": 835, "2020": 1917, "2021": 1353, "2010": 1102, "2022": 1302, "2008": 295, "2003": 12, "2007": 117, "2005": 7, "2006": 64, "2025": 194, "2024": 165, "2023": 173}, "algorithm": {"2014": 46196, "2015": 38865, "2016": 15659, "2019": 4037, "2021": 3616, "2017": 19914, "2013": 12038, "2012": 3342, "2011": 1164, "2018": 5232, "2020": 3898, "2022": 4352, "2008": 152, "2009": 334, "2010": 797, "2007": 44, "2004": 8, "2005": 9, "2006": 7, "2025": 414, "2024": 341, "2023": 313}, "filesystem": {"2014": 55517, "2015": 36168, "2016": 16155, "2019": 2896, "2018": 4734, "2012": 3747, "2013": 16575, "2017": 18909, "2011": 1922, "2020": 3327, "2022": 2233, "2021": 2165, "2010": 649, "2009": 378, "2008": 238, "2005": 8, "2006": 45, "2007": 135, "2004": 4, "2025": 296, "2024": 243, "2023": 329}, "bind": {"2014": 19037, "2016": 7307, "2015": 21235, "2013": 9954, "2019": 1303, "2012": 4838, "2017": 6446, "2011": 2336, "2010": 1482, "2022": 1224, "2018": 2300, "2021": 652, "2020": 851, "2008": 230, "2009": 706, "2007": 178, "2006": 21, "2005": 10, "2024": 59, "2025": 70, "2023": 50}, "lexical_cast": {"2014": 11521, "2016": 5779, "2015": 12897, "2019": 1151, "2018": 1613, "2017": 5792, "2021": 918, "2013": 4401, "2012": 2207, "2011": 1355, "2022": 1095, "2020": 872, "2010": 791, "2008": 129, "2009": 331, "2007": 78, "2002": 1, "2005": 2, "2006": 16, "2024": 84, "2025": 125, "2023": 52}, "program_options": {"2014": 10852, "2015": 11718, "2016": 4937, "2019": 829, "2018": 1603, "2013": 4693, "2012": 1786, "2011": 838, "2017": 4369, "2020": 745, "2010": 393, "2009": 151, "2022": 1152, "2021": 1167, "2008": 51, "2007": 30, "2006": 4, "2025": 129, "2024": 132, "2023": 117}, "asio": {"2014": 21137, "2015": 20478, "2013": 8105, "2016": 9720, "2019": 1601, "2021": 1325, "2017": 14725, "2011": 1300, "2018": 2470, "2012": 2090, "2020": 2480, "2010": 304, "2022": 1716, "2009": 71, "2008": 41, "2007": 3, "2024": 960, "2023": 1004, "2025": 1310}, "config": {"2014": 33654, "2015": 19898, "2013": 12505, "2011": 4107, "2012": 5623, "2016": 10532, "2019": 663, "2017": 19843, "2010": 1218, "2008": 189, "2018": 1151, "2021": 623, "2020": 707, "2022": 523, "2009": 279, "2003": 3, "2007": 143, "2005": 10, "2002": 25, "2006": 42, "2024": 321, "2025": 1148, "2023": 467}, "date_time": {"2014": 16360, "2015": 12017, "2016": 4583, "2012": 1923, "2013": 5952, "2019": 947, "2017": 5720, "2011": 907, "2018": 1483, "2010": 515, "2009": 358, "2022": 771, "2021": 606, "2020": 784, "2008": 52, "2007": 22, "2006": 1, "2023": 62, "2024": 41, "2025": 65}, "function": {"2014": 9041, "2016": 2955, "2015": 8165, "2013": 4464, "2021": 235, "2012": 2498, "2011": 1254, "2017": 2720, "2007": 53, "2010": 652, "2018": 699, "2019": 378, "2020": 350, "2022": 191, "2009": 288, "2008": 48, "2003": 5, "2006": 5, "2025": 25, "2023": 13, "2024": 26}, "test": {"2014": 85210, "2015": 51011, "2017": 34947, "2016": 25164, "2011": 4344, "2012": 8058, "2019": 6692, "2018": 8801, "2013": 23722, "2010": 1276, "2021": 7421, "2022": 7612, "2009": 596, "2020": 6282, "2008": 94, "2007": 68, "2006": 1, "2025": 782, "2024": 741, "2023": 265}, "foreach": {"2014": 53245, "2015": 34246, "2016": 12761, "2017": 14517, "2021": 552, "2013": 16187, "2012": 4187, "2011": 1135, "2019": 1074, "2020": 670, "2008": 45, "2018": 2043, "2022": 336, "2010": 522, "2009": 211, "2007": 3, "2025": 74, "2024": 36, "2023": 29}, "variant": {"2014": 7815, "2015": 5882, "2013": 2263, "2016": 2683, "2019": 483, "2017": 3852, "2011": 541, "2012": 587, "2022": 381, "2021": 348, "2018": 703, "2020": 333, "2010": 186, "2009": 82, "2007": 24, "2008": 15, "2006": 1, "2025": 46, "2023": 44, "2024": 105}, "type_traits": {"2014": 20966, "2015": 13859, "2013": 7657, "2012": 2417, "2016": 5360, "2011": 1806, "2017": 12177, "2009": 358, "2010": 1323, "2008": 114, "2022": 168, "2018": 648, "2021": 211, "2020": 103, "2019": 427, "2007": 42, "2003": 27, "2002": 11, "2006": 24, "2025": 1821, "2023": 227, "2024": 294}, "tuple": {"2014": 14709, "2015": 6953, "2017": 3043, "2016": 2919, "2012": 1300, "2013": 5533, "2011": 679, "2008": 37, "2009": 94, "2022": 289, "2018": 472, "2010": 316, "2019": 393, "2021": 345, "2020": 191, "2007": 28, "2006": 3, "2025": 68, "2024": 19, "2023": 18}, "iostreams": {"2014": 10774, "2015": 9775, "2018": 957, "2012": 1212, "2019": 522, "2016": 4857, "2013": 2726, "2011": 575, "2017": 6101, "2020": 693, "2022": 679, "2021": 671, "2010": 249, "2009": 142, "2008": 29, "2006": 26, "2007": 2, "2024": 137, "2025": 140, "2023": 157}, "array": {"2014": 4504, "2015": 3191, "2013": 1962, "2021": 100, "2012": 791, "2016": 1853, "2017": 2156, "2011": 538, "2008": 22, "2022": 173, "2010": 162, "2018": 321, "2019": 235, "2020": 120, "2009": 77, "2007": 12, "2024": 11, "2025": 39, "2023": 8}, "assign": {"2014": 29506, "2016": 6133, "2015": 14222, "2019": 566, "2017": 7847, "2018": 1335, "2012": 1524, "2013": 8723, "2022": 250, "2021": 382, "2011": 339, "2020": 419, "2010": 242, "2009": 57, "2007": 17, "2008": 5, "2025": 11, "2024": 18, "2023": 11}, "interprocess": {"2014": 10661, "2016": 6271, "2015": 6397, "2012": 1134, "2019": 314, "2017": 8106, "2013": 3749, "2011": 926, "2022": 317, "2021": 314, "2018": 395, "2020": 229, "2010": 33, "2009": 1, "2025": 256, "2024": 144, "2023": 44}, "hof": {"2022": 2, "2025": 77, "2024": 7, "2023": 92}, "leaf": {"2022": 1, "2021": 1, "2025": 6, "2023": 2}, "outcome": {"2022": 11, "2024": 2, "2025": 1}, "poly_collection": {"2018": 8, "2022": 1, "2017": 23, "2025": 6}, "safe_numerics": {"2021": 2, "2022": 1, "2025": 9}, "stl_interfaces": {"2021": 3, "2020": 8, "2025": 3, "2024": 1}, "static_string": {"2015": 3, "2013": 3, "2014": 3, "2020": 1, "2025": 1}, "variant2": {"2021": 1, "2022": 1, "2019": 2, "2025": 7, "2023": 2}, "metaparse": {"2017": 2248, "2021": 1, "2019": 1, "2018": 91, "2016": 1, "2025": 234, "2024": 44, "2023": 39}, "pfr": {"2021": 4, "2018": 1, "2017": 1, "2022": 2, "2025": 49, "2024": 4, "2023": 34}, "vmd": {"2017": 1704, "2022": 1, "2018": 39, "2021": 3, "2016": 590, "2025": 119, "2024": 67, "2023": 36}, "mp11": {"2021": 11, "2019": 3, "2018": 2, "2022": 30, "2020": 2, "2025": 52, "2024": 18, "2023": 26}, "histogram": {"2022": 112, "2021": 53, "2019": 3, "2025": 35, "2024": 21, "2023": 27}, "qvm": {"2017": 947, "2022": 45, "2018": 40, "2014": 291, "2020": 2, "2021": 22, "2019": 12, "2011": 15, "2025": 35, "2024": 52, "2023": 75}, "contract": {"2018": 14, "2019": 1, "2025": 14, "2024": 15, "2023": 15}, "convert": {"2017": 196, "2021": 1, "2019": 2, "2020": 8, "2018": 17, "2016": 85, "2023": 3, "2024": 2}, "parameter_python": {"2014": 3, "2017": 10, "2015": 2, "2018": 1, "2011": 1, "2013": 1, "2016": 2, "2012": 1}, "json": {"2022": 30, "2021": 34, "2011": 4, "2025": 131, "2024": 26, "2023": 13}, "callable_traits": {"2019": 31, "2022": 11, "2020": 2, "2017": 1, "2021": 6, "2018": 2, "2025": 15, "2024": 11, "2023": 2}, "type_erasure": {"2017": 1308, "2014": 819, "2013": 404, "2018": 35, "2016": 353, "2015": 406, "2025": 32, "2024": 31, "2023": 23}};
        const years = [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022];
        const reposByYear = {"2022": 1041, "2021": 645, "2020": 812, "2019": 928, "2018": 1568, "2017": 4616, "2016": 4858, "2015": 9411, "2014": 7155, "2013": 2819, "2012": 1259, "2011": 789, "2010": 468, "2009": 267, "2008": 99, "2007": 31, "2006": 3, "2005": 2, "2003": 3, "2002": 2};
        const versionDistribution = [{"version": "1.50.0", "count": 162}, {"version": "1.51.0", "count": 21}, {"version": "1.52.0", "count": 36}, {"version": "1.53.0", "count": 296}, {"version": "1.54.0", "count": 332}, {"version": "1.55.0", "count": 383}, {"version": "1.56.0", "count": 138}, {"version": "1.57.0", "count": 113}, {"version": "1.58.0", "count": 172}, {"version": "1.59.0", "count": 103}, {"version": "1.60.0", "count": 64}, {"version": "1.61.0", "count": 39}, {"version": "1.62.0", "count": 36}, {"version": "1.63.0", "count": 45}, {"version": "1.64.0", "count": 35}, {"version": "1.65.0", "count": 28}, {"version": "1.65.1", "count": 26}, {"version": "1.66.0", "count": 56}, {"version": "1.67.0", "count": 26}, {"version": "1.68.0", "count": 19}, {"version": "1.69.0", "count": 26}, {"version": "1.70.0", "count": 27}, {"version": "1.71.0", "count": 18}, {"version": "1.72.0", "count": 16}, {"version": "1.73.0", "count": 10}, {"version": "1.74.0", "count": 9}, {"version": "1.75.0", "count": 16}, {"version": "1.76.0", "count": 2}, {"version": "1.77.0", "count": 4}, {"version": "1.78.0", "count": 6}, {"version": "1.79.0", "count": 11}, {"version": "1.80.0", "count": 1}];
        
        // Helper function to get color intensity based on value
        // Improved color scheme: light blue -> vibrant blue -> purple -> dark purple
        function getHeatmapColor(value, maxValue) {
            if (value === 0) return '#f7fafc';
            const intensity = Math.min(value / maxValue, 1);
            
            // Enhanced color gradient for better visibility
            if (intensity < 0.25) {
                // Light blue to blue
                const t = intensity / 0.25;
                const r = Math.floor(230 - 50 * t);
                const g = Math.floor(240 - 80 * t);
                const b = Math.floor(255 - 20 * t);
                return `rgb(${r}, ${g}, ${b})`;
            } else if (intensity < 0.5) {
                // Blue to cyan
                const t = (intensity - 0.25) / 0.25;
                const r = Math.floor(180 - 40 * t);
                const g = Math.floor(160 + 20 * t);
                const b = Math.floor(235 + 20 * t);
                return `rgb(${r}, ${g}, ${b})`;
            } else if (intensity < 0.75) {
                // Cyan to purple
                const t = (intensity - 0.5) / 0.25;
                const r = Math.floor(140 + 60 * t);
                const g = Math.floor(180 - 60 * t);
                const b = Math.floor(255 - 40 * t);
                return `rgb(${r}, ${g}, ${b})`;
            } else {
                // Purple to dark purple
                const t = (intensity - 0.75) / 0.25;
                const r = Math.floor(200 - 60 * t);
                const g = Math.floor(120 - 40 * t);
                const b = Math.floor(215 - 50 * t);
                return `rgb(${r}, ${g}, ${b})`;
            }
        }
        
        // Helper to determine text color based on background
        function getTextColor(bgColor) {
            // Extract RGB values
            const rgb = bgColor.match(/\d+/g);
            if (!rgb || rgb.length < 3) return '#000000';
            const r = parseInt(rgb[0]);
            const g = parseInt(rgb[1]);
            const b = parseInt(rgb[2]);
            // Calculate luminance
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            return luminance > 0.5 ? '#000000' : '#ffffff';
        }
        
        // Create heatmap
        function createHeatmap() {
            const allLibraries = [...topLibraries, ...bottomLibraries].map(lib => lib.name);
            const headerRow = document.getElementById('heatmapHeader');
            const body = document.getElementById('heatmapBody');
            
            // Create header
            let headerHtml = '<tr><th>Library</th>';
            years.forEach(year => {
                headerHtml += `<${year % 5 === 0 ? 'th' : 'th style="font-size:0.7em"'}>${year}</th>`;
            });
            headerHtml += '</tr>';
            headerRow.innerHTML = headerHtml;
            
            // Find max value for normalization
            let maxValue = 0;
            allLibraries.forEach(libName => {
                const dist = commitDistribution[libName] || {};
                years.forEach(year => {
                    maxValue = Math.max(maxValue, dist[year] || 0);
                });
            });
            
            // Create rows
            body.innerHTML = '';
            allLibraries.forEach(libName => {
                const dist = commitDistribution[libName] || {};
                const row = document.createElement('tr');
                
                // Library name cell
                const nameCell = document.createElement('td');
                nameCell.textContent = libName;
                row.appendChild(nameCell);
                
                // Year cells
                years.forEach(year => {
                    const cell = document.createElement('td');
                    const value = dist[year] || 0;
                    const color = getHeatmapColor(value, maxValue);
                    const textColor = getTextColor(color);
                    
                    const cellDiv = document.createElement('div');
                    cellDiv.className = 'heatmap-cell';
                    cellDiv.setAttribute('data-value', value);
                    cellDiv.style.backgroundColor = color;
                    cellDiv.style.color = textColor;
                    cellDiv.title = `${libName}: ${value} commits in ${year}`;
                    if (value > 0) {
                        cellDiv.textContent = value;
                    }
                    cell.appendChild(cellDiv);
                    row.appendChild(cell);
                });
                
                body.appendChild(row);
            });
            
            // Create legend
            const legend = document.getElementById('heatmapLegend');
            const legendSteps = [0, 0.25, 0.5, 0.75, 1.0];
            legend.innerHTML = '<span style="font-weight: 600; margin-right: 5px;">Commits:</span>';
            legendSteps.forEach(step => {
                const value = Math.round(step * maxValue);
                const color = getHeatmapColor(value, maxValue);
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <div class="legend-color" style="background-color: ${color}"></div>
                    <span>${value}</span>
                `;
                legend.appendChild(item);
            });
        }
        
        // Initialize heatmap
        createHeatmap();
        
        // Create repository counts by year chart
        function createReposByYearChart() {
            const ctx = document.getElementById('reposByYearChart');
            if (!ctx) return;
            
            // Prepare data: sort years and get counts
            const sortedYears = Object.keys(reposByYear).map(Number).sort((a, b) => a - b);
            const counts = sortedYears.map(year => reposByYear[year.toString()]);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedYears.map(y => y.toString()),
                    datasets: [{
                        label: 'Repository Count',
                        data: counts,
                        borderColor: 'rgba(102, 126, 234, 1)',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: 'rgba(102, 126, 234, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                font: { size: 14, weight: 'bold' },
                                padding: 15
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            callbacks: {
                                label: function(context) {
                                    return `Repositories: ${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Repositories',
                                font: { size: 14, weight: 'bold' }
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year',
                                font: { size: 14, weight: 'bold' }
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }
        
        // Create version distribution chart (1.53.0 - 1.80.0)
        function createVersionDistributionChart() {
            const ctx = document.getElementById('versionDistributionChart');
            if (!ctx || !versionDistribution || versionDistribution.length === 0) return;
            
            // Sort versions numerically
            const sortedVersions = [...versionDistribution].sort((a, b) => {
                const aParts = a.version.split('.').map(Number);
                const bParts = b.version.split('.').map(Number);
                for (let i = 0; i < Math.max(aParts.length, bParts.length); i++) {
                    const aVal = aParts[i] || 0;
                    const bVal = bParts[i] || 0;
                    if (aVal !== bVal) return aVal - bVal; // Ascending order
                }
                return 0;
            });
            
            const labels = sortedVersions.map(v => v.version);
            const data = sortedVersions.map(v => v.count);
            
            // Create gradient colors
            const colors = sortedVersions.map((v, i) => {
                const intensity = i / Math.max(sortedVersions.length - 1, 1);
                // Gradient from blue to purple
                const r = Math.floor(102 + (118 - 102) * intensity);
                const g = Math.floor(126 + (75 - 126) * intensity);
                const b = Math.floor(234 + (162 - 234) * intensity);
                return `rgba(${r}, ${g}, ${b}, 0.8)`;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Repository Count',
                        data: data,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c.replace('0.8', '1')),
                        borderWidth: 2,
                        borderRadius: 6,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            callbacks: {
                                label: function(context) {
                                    return `Repositories: ${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Repositories',
                                font: { size: 14, weight: 'bold' }
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Boost Version',
                                font: { size: 14, weight: 'bold' }
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45,
                                font: { size: 11 }
                            }
                        }
                    }
                }
            });
        }
        
        // Chart configuration
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    padding: 12,
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 13 },
                    callbacks: {
                        label: function(context) {
                            return context.parsed.y.toLocaleString();
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return value.toLocaleString();
                        }
                    }
                }
            }
        };
        
        // Wait for Chart.js to load and DOM to be ready
        function initializeCharts() {
            if (typeof Chart === 'undefined') {
                console.error('Chart.js not loaded!');
                return;
            }
            
            // Check if data is available
            if (!topLibraries || topLibraries.length === 0) {
                console.error('No library data available');
                return;
            }
            
            try {
                // Top libraries - Repository count chart
                const topRepoCtx = document.getElementById('topRepoChart');
                if (topRepoCtx) {
                    new Chart(topRepoCtx, {
                        type: 'bar',
                        data: {
                            labels: topLibraries.map(lib => lib.name),
                            datasets: [{
                                label: 'Repository Count',
                                data: topLibraries.map(lib => lib.repo_count),
                                backgroundColor: 'rgba(102, 126, 234, 0.8)',
                                borderColor: 'rgba(102, 126, 234, 1)',
                                borderWidth: 2
                            }]
                        },
                        options: chartOptions
                    });
                }
                
                // Top libraries - Usage count chart
                const topUsageCtx = document.getElementById('topUsageChart');
                if (topUsageCtx) {
                    new Chart(topUsageCtx, {
                        type: 'bar',
                        data: {
                            labels: topLibraries.map(lib => lib.name),
                            datasets: [{
                                label: 'Usage Count',
                                data: topLibraries.map(lib => lib.usage_count),
                                backgroundColor: 'rgba(118, 75, 162, 0.8)',
                                borderColor: 'rgba(118, 75, 162, 1)',
                                borderWidth: 2
                            }]
                        },
                        options: chartOptions
                    });
                }
                
                // Bottom libraries - Repository count chart
                const bottomRepoCtx = document.getElementById('bottomRepoChart');
                if (bottomRepoCtx && bottomLibraries && bottomLibraries.length > 0) {
                    new Chart(bottomRepoCtx, {
                        type: 'bar',
                        data: {
                            labels: bottomLibraries.map(lib => lib.name),
                            datasets: [{
                                label: 'Repository Count',
                                data: bottomLibraries.map(lib => lib.repo_count),
                                backgroundColor: 'rgba(237, 137, 54, 0.8)',
                                borderColor: 'rgba(237, 137, 54, 1)',
                                borderWidth: 2
                            }]
                        },
                        options: chartOptions
                    });
                }
                
                // Bottom libraries - Usage count chart
                const bottomUsageCtx = document.getElementById('bottomUsageChart');
                if (bottomUsageCtx && bottomLibraries && bottomLibraries.length > 0) {
                    new Chart(bottomUsageCtx, {
                        type: 'bar',
                        data: {
                            labels: bottomLibraries.map(lib => lib.name),
                            datasets: [{
                                label: 'Usage Count',
                                data: bottomLibraries.map(lib => lib.usage_count),
                                backgroundColor: 'rgba(245, 101, 101, 0.8)',
                                borderColor: 'rgba(245, 101, 101, 1)',
                                borderWidth: 2
                            }]
                        },
                        options: chartOptions
                    });
                }
            } catch (error) {
                console.error('Error creating charts:', error);
            }
        }
        
        // Initialize charts when page loads
        function initAllCharts() {
            initializeCharts();
            createReposByYearChart();
            createVersionDistributionChart();
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof Chart !== 'undefined') {
                    initAllCharts();
                } else {
                    window.addEventListener('load', initAllCharts);
                }
            });
        } else {
            // DOM already loaded
            if (typeof Chart !== 'undefined') {
                initAllCharts();
            } else {
                // Wait for Chart.js to load
                window.addEventListener('load', initAllCharts);
            }
        }
        
        // Populate tables
        function populateTable(tableBodyId, libraries, isTop) {
            const tbody = document.getElementById(tableBodyId);
            tbody.innerHTML = '';
            
            libraries.forEach((lib, index) => {
                const row = document.createElement('tr');
                const rank = index + 1;
                const badgeClass = isTop ? 'badge-top' : 'badge-bottom';
                const badgeText = isTop ? 'Top' : 'Bottom';
                const timeRange = lib.earliest_commit !== 'N/A' && lib.latest_commit !== 'N/A'
                    ? `${lib.earliest_commit} - ${lib.latest_commit}`
                    : 'N/A';
                
                row.innerHTML = `
                    <td><span class="badge ${badgeClass}">${rank}</span></td>
                    <td><strong>${lib.name}</strong></td>
                    <td>${lib.repo_count.toLocaleString()}</td>
                    <td>${lib.usage_count.toLocaleString()}</td>
                    <td class="date-range">${timeRange}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        populateTable('topTableBody', topLibraries, true);
        populateTable('bottomTableBody', bottomLibraries, false);
    </script>
</body>
</html>
